<!doctype html>
<html lang="">
<head>
<meta charset="utf-8">
<title>gweb-sb</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="shortcut icon" href="/favicon.ico">

<!-- build:css(.) styles/vendor.css -->
<!-- bower:css -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<!-- endbower -->
<!-- endbuild -->

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
table.fixed {
	table-layout: fixed;
}

table.fixed td {
	overflow: hidden;
}
</style>
<script>
	window.___gcfg = {
		parsetags : 'explicit'
	};
</script>

</head>
<body>
	<!--[if lt IE 10]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

	<div class="container">
		<div class="header">
			<h3 class="text-muted">English Sermon Service:</h3>
			We offer 3 different ways that you can listen KBCSJ worship in
			English.
		</div>

		<div class="side-body">

			<legend style="margin-top: 30px">
				<i class="fa fa-info-circle" aria-hidden="true"></i> <i
					data-placement="right"></i> Conference Call:
				<p style='font-size: 11pt;'>&nbsp; &nbsp; &nbsp;Conference call
					has no delay to listen live worship by dialing in.</p>
			</legend>

			<div class="row">
				<div class="col-md-12">
					<form id="form1" class="form-horizontal">
						<div class="form-group">
							<label class="control-label col-sm-2" for="col_41">Dial:
							</label>
							<div class="col-sm-10">
								<div class="form-inline">
									<a href="tel:401-283-5815" target="_blank" style='width: 71%'
										class="form-control" disabled>401-283-5815</a>
								</div>
							</div>
							<label class="control-label col-sm-2" for="col_41">PIN: </label>
							<div class="col-sm-10">
								<div class="form-inline">
									<input type="text" id="col_41" name="col_41" value="50232"
										style='width: 71%' class="form-control" disabled>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>

			<legend style="margin-top: 30px">
				<i class="fa fa-info-circle" aria-hidden="true"></i> <i
					data-placement="right"></i> Live Youtub
				<p style='font-size: 11pt;'>&nbsp; &nbsp; &nbsp;YouTube Live,
					has about 20-30seconds delay due to record & play in the network
					server. please move the bottom play status bar to far right, to
					hear live worship because it plays from start of recording by
					default.</p>
			</legend>

			<div class="row">
				<div class="col-md-12">
					<form id="form1" class="form-horizontal">
						<div class="form-group">
							<label class="control-label col-sm-2" for="col_2">Link</label>
							<div class="col-sm-8">
								<div class="form-inline">
									<input type="text" id="col_2" name="col_2" value=""
										style='width: 90%' class="form-control" disabled>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-inline">
									<button type="button" class="btn btn-primary"
										onclick="getValue()">Open</button>
									<div id="debug"></div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<form id="form1" class="form-horizontal">
						<div class="form-group">
							<label class="control-label col-sm-2" for="col_3">Script</label>
							<div class="col-sm-8">
								<div class="form-inline">
									<input type="text" id="col_3" name="col_3" value=""
										style='width: 90%' class="form-control" disabled>
								</div>
							</div>
							<div class="col-sm-2">
								<div class="form-inline">
									<button type="button" class="btn btn-primary"
										onclick="getValue('script')">Script</button>
								</div>
							</div>
						</div>
				</div>
				</form>
			</div>
		</div>

		<legend style="margin-top: 30px">
			<i class="fa fa-info-circle" aria-hidden="true"></i> <i
				data-placement="right"></i> Mixlr
			<p style='font-size: 11pt;'>&nbsp; &nbsp; &nbsp;Mixlr is free
				application available in App store for Android/iPhone. please search
				KBCSJ for live worship in English. this way also has 20-30 seconds
				of delay.</p>
		</legend>

		<div class="row">
			<div class="col-md-12">
				<form id="form1" class="form-horizontal">
					<div class="form-group">
						<label class="control-label col-sm-2" for="col_42">Link</label>
						<div class="col-sm-8">
							<div class="form-inline">
								<input type="text" id="col_42" name="col_42"
									value="http://mixlr.com/kbcsj" style='width: 90%'
									class="form-control" disabled>
							</div>
						</div>
						<div class="col-sm-2">
							<div class="form-inline">
								<button type="button" class="btn btn-primary" onclick="openApp('mixlr')">Open</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>

		<legend style="margin-top: 30px">
			<i class="fa fa-bars" aria-hidden="true"></i> <i
				data-placement="right"></i> Last Sermons
		</legend>
		<div class="row">
			<div class="col-md-12">
				<div class="col-sm-10"></div>
				<div class="col-sm-2" style='text-align: right'>
					<button type="button" class="btn btn-primary"
						onclick="execute('runningLogs')">View</button>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">
				<div id="table_wrapper">
					<table id="runningLogs"
						class="table table-bordered table-hover fixed">
						<thead>
							<tr>
								<th class='text-center'>Date</th>
								<th class='text-center'>Link</th>
								<th class='text-center'>Script</th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
					<table id='runningLog_template' style='display: none'>
						<tr>
							<td class='text-center'>{date}</td>
							<td class='text-center'><a href='{link}' target='_blank'>{link}</a></td>
							<td class='text-center'><a href='{script}' target='_blank'>{script}</a></td>
						</tr>
					</table>
				</div>
			</div>

			<div class="footer" style='margin-top: 50px;'></div>
		</div>

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.min.js"></script>

		<script src="scripts/gweb_c.js"></script>
		<?!= include('myscript.js'); ?>

		<script>
			var runningObj;
			var us;

			function getValue(type) {
				if (type == 'script') {
					window.open($("#col_3").val());
				} else {
					window.open($("#col_2").val());
				}
			}
			
			function openApp(type) {
				if (type == 'mixlr') {
					window.open($("#col_42").val());
				} else {
					window.open($("#col_2").val());
				}
			}
			
			$(document)
					.ready(
							function() {
								runningObj = $('#runningLogs').DataTable({
									"paging" : true,
									"pageLength" : 5,
									"lengthChange" : false,
									"searching" : false,
									"ordering" : true,
									"info" : true,
									"autoWidth" : true
								});

								function getLink() {
									$('#col_2').val('');
									$('#col_3').val('');
									var url = '/rest/getLink';
									$
											.ajax({
												method : 'GET',
												url : url,
												dataType : 'json'
											})
											.done(
													function(data) {
														if (data.col_2) {
															console
																	.timeEnd("ajax response time");
															// console.log(JSON.stringify(data));
															$('#col_2').val(
																	data.col_2);
															$('#col_3').val(
																	data.col_3);
															runningLogs();
														} else {
															$('#msg').text(
																	data.msg);
														}
													})
											.fail(
													function(msg) {
														console
																.log(JSON
																		.stringify(msg));
														$('#msg')
																.text(
																		JSON
																				.stringify(msg));
													})
								}

								function runningLogs() {
									var url = '/rest/runningLogs';
									$
											.ajax({
												method : 'GET',
												url : url,
												dataType : 'json'
											})
											.done(
													function(rslt) {
														if (rslt) {
															if (rslt.rows) {
																if ($.fn.DataTable
																		.isDataTable('#runningLogs')) {
																	$(
																			'#runningLogs')
																			.DataTable()
																			.destroy();
																}
																$(
																		'#runningLogs tbody')
																		.empty();

																for (var i = 1; i < rslt.rows.length; i++) {
																	var tmp = $(
																			'#runningLog_template')
																			.find(
																					'tr')
																			.html();
																	var date = rslt.rows[i]['A'
																			+ (i + 1)];
																	date = moment(
																			date)
																			.format(
																					'LLL');
																	tmp = tmp
																			.replace(
																					'{date}',
																					date);
																	tmp = tmp
																			.replace(
																					/{link}/g,
																					rslt.rows[i]['B'
																							+ (i + 1)]);
																	tmp = tmp
																			.replace(
																					/{script}/g,
																					rslt.rows[i]['C'
																							+ (i + 1)]);
																	$(
																			"#runningLogs")
																			.find(
																					'tbody')
																			.append(
																					'<tr>'
																							+ tmp
																							+ '</tr>');
																}
															} else {
																us
																		.getResults(rslt);
															}
														}
													})
											.fail(
													function(msg) {
														console
																.log(JSON
																		.stringify(msg));
														$('#msg')
																.text(
																		JSON
																				.stringify(msg));
													})
								}

								getLink();

							});
		</script>

		<script
			src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
		<script
			src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.js"></script>
</body>
</html>
